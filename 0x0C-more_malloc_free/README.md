This function allocates memory using `malloc` and checks for allocation failure.
